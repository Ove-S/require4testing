<?xml version='1.0' encoding='UTF-8' ?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
	<h:head>
		<link rel="icon" type="image/png" href="#{resource['images/require4testing-favicon.png']}" />
		<h:outputStylesheet library="css" name="style.css" />
	    <title>Require4Testing Testläufe</title>
	</h:head>
	<h:body>
		<header>
			<ui:include src="navbar.xhtml"/>
		</header>
	    <main>
	    	<h:form>
	    		<p:card>   
			        <p:dataTable var="testrun" value="#{testrunController.testruns}" rowKey="#{testrun.id}" selectionMode="single" scrollable="true" scrollHeight="300" scrollRows="20" liveScroll="true" >
			        	<f:facet name="header">
				            <h:panelGroup layout="block" style="display: flex; justify-content: space-between; align-items: center;">
					            <h:outputText value="Testläufe" styleClass="table-header"/>
					            <p:commandButton value="Testlauf hinzufügen" icon="pi pi-plus-circle" action="#{testrunController.editNewTestrun}" rendered="#{userController.currentUser.testmanager}" />
					        </h:panelGroup>
					    </f:facet>
			        	<p:ajax event="rowSelect" listener="#{testrunController.onRowSelect}" />
			        	
		        		<p:column headerText="ID">
			                <h:outputText value="#{testrun.id}" />
			            </p:column>
			            
			            <p:column headerText="Titel">
			                <h:outputText value="#{testrun.title}" />
			            </p:column>
			            
			            <p:column headerText="Autor">
			                <h:outputText value="#{testrun.author}" />
			            </p:column>
			            
  			            <p:column headerText="Tester">
			                <h:outputText value="#{testrun.tester.fullName}" />
			            </p:column>
		        	</p:dataTable>
	        	</p:card>
	        </h:form>
        </main>
	</h:body>
</html>